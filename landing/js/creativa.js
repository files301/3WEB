var Star=function(a,b,c){this.x=a,this.y=b,this.slope=b/a,this.opacity=0,this.speed=Math.max(Math.random()*c,1)};Star.prototype.distanceTo=function(a,b){return Math.sqrt(Math.pow(a-this.x,2)+Math.pow(b-this.y,2))},Star.prototype.resetPosition=function(a,b,c){return Star.apply(this,arguments),this};var BigBang={getRandomStar:function(a,b,c,d,e){var f=BigBang.getRandomPosition(a,b,c,d);return new Star(f.x,f.y,e)},getRandomPosition:function(a,b,c,d){return{x:Math.floor(Math.random()*c+a),y:Math.floor(Math.random()*d+b)}}},StarField=function(a){this.container=document.getElementById(a),this.canvasElem=this.container.getElementsByTagName("canvas")[0],this.canvas=this.canvasElem.getContext("2d"),this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.starField=[]};StarField.prototype._updateStarField=function(){var a,b,c,d;for(a=0;a<this.numStars;a++)b=this.starField[a],d=Math.min(b.speed,Math.abs(b.speed/b.slope)),b.x+=b.x>0?d:-d,b.y=b.slope*b.x,b.opacity+=b.speed/100,(Math.abs(b.x)>this.width/2||Math.abs(b.y)>this.height/2)&&(c=BigBang.getRandomPosition(-this.width/10,-this.height/10,this.width/5,this.height/5),b.resetPosition(c.x,c.y,this.maxStarSpeed))},StarField.prototype._renderStarField=function(){var a,b;for(this.canvas.fillStyle="rgba(0, 0, 0, .5)",this.canvas.fillRect(0,0,this.width,this.height),a=0;a<this.numStars;a++)b=this.starField[a],this.canvas.fillStyle="rgba(255, 255, 255, "+b.opacity+")",this.canvas.fillRect(b.x+this.width/2,b.y+this.height/2,2,2)},StarField.prototype._renderFrame=function(a){var b=a-(this.prevFrameTime||0);window.requestAnimationFrame(this._renderFrame.bind(this)),(b>=30||!this.prevFrameTime)&&(this.prevFrameTime=a,this._updateStarField(),this._renderStarField())},StarField.prototype._adjustCanvasSize=function(a,b){this.width=this.canvasElem.width=a||this.container.offsetWidth,this.height=this.canvasElem.height=b||this.container.offsetHeight},StarField.prototype._watchCanvasSize=function(a){var c,d,b=a-(this.prevCheckTime||0);window.requestAnimationFrame(this._watchCanvasSize.bind(this)),(b>=333||!this.prevCheckTime)&&(this.prevCheckTime=a,c=this.container.offsetWidth,d=this.container.offsetHeight,this.oldWidth===c&&this.oldHeight===d||(this.oldWidth=c,this.oldHeight=d,this._adjustCanvasSize(c,d)))},StarField.prototype._initScene=function(a){var b;for(b=0;b<this.numStars;b++)this.starField.push(BigBang.getRandomStar(-this.width/2,-this.height/2,this.width,this.height,this.maxStarSpeed));window.requestAnimationFrame(this._renderFrame.bind(this)),window.requestAnimationFrame(this._watchCanvasSize.bind(this))},StarField.prototype.render=function(a,b){this.numStars=a||100,this.maxStarSpeed=b||3,this._initScene(this.numStars)},function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var starField=new StarField("fullScreen").render(333,3);